<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.chart.BarChart?>
<?import javafx.scene.chart.CategoryAxis?>
<?import javafx.scene.chart.NumberAxis?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TabPane?>
<?import javafx.scene.control.Tab?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.Region?>
<?import java.net.URL?>

<BorderPane prefHeight="800.0" prefWidth="1200.0" styleClass="admin-root" xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.onriderentals.controller.AdminDashboardController">
    <stylesheets>
        <URL value="@styles.css" />
        <URL value="@admin.css" />
    </stylesheets>
    
    <left>
        <VBox styleClass="admin-sidebar" prefWidth="280">
            <children>
                <Label text="OnRide Admin" styleClass="sidebar-title" />
                
                <VBox spacing="8" VBox.vgrow="ALWAYS">
                    <Button fx:id="sidebarDashboardBtn" text="ðŸ   Dashboard" onAction="#handleSidebarAction" maxWidth="1.7976931348623157E308" styleClass="sidebar-btn" />
                    <Button fx:id="sidebarUsersBtn" text="ðŸ‘¥  User Management" onAction="#handleSidebarAction" maxWidth="1.7976931348623157E308" styleClass="sidebar-btn" />
                    <Button fx:id="sidebarBookingsBtn" text="ðŸ“…  Rentals and Bookings" onAction="#handleSidebarAction" maxWidth="1.7976931348623157E308" styleClass="sidebar-btn" />
                    <Button fx:id="sidebarVehiclesBtn" text="ðŸš—  Vehicle Fleet" onAction="#handleSidebarAction" maxWidth="1.7976931348623157E308" styleClass="sidebar-btn" />
                </VBox>
                
                <Region VBox.vgrow="ALWAYS" />
                
                <VBox spacing="10">
                    <Label text="Logged in as Admin" style="-fx-text-fill: #64748b; -fx-font-size: 13px;" />
                   <!-- Logout is in Navbar, but maybe add one here too if needed -->
                </VBox>
            </children>
        </VBox>
    </left>
    
    <center>
        <VBox>
            <fx:include source="Navbar.fxml"/>
            
            <TabPane fx:id="mainTabPane" side="TOP" tabClosingPolicy="UNAVAILABLE" VBox.vgrow="ALWAYS" style="-fx-padding: 0; -fx-tab-max-height: 0; -fx-tab-min-height: 0;">
                <tabs>
                    <!-- Dashboard Tab -->
                    <Tab text="Dashboard">
                        <VBox styleClass="admin-content">
                            <Label text="Dashboard Overview" styleClass="page-header" />
                            
                            <HBox spacing="25">
                                <VBox styleClass="admin-stat-card" HBox.hgrow="ALWAYS">
                                    <HBox spacing="15" alignment="CENTER_LEFT">
                                        <VBox styleClass="admin-stat-icon-box, icon-box-primary">
                                            <Label text="ðŸ‘¥" styleClass="stat-icon" />
                                        </VBox>
                                        <VBox>
                                            <Label fx:id="totalUsersLabel" text="0" styleClass="stat-value-large" />
                                            <Label text="Total Registered Users" styleClass="stat-label-muted" />
                                        </VBox>
                                    </HBox>
                                </VBox>
                                
                                <VBox styleClass="admin-stat-card" HBox.hgrow="ALWAYS">
                                    <HBox spacing="15" alignment="CENTER_LEFT">
                                        <VBox styleClass="admin-stat-icon-box, icon-box-success">
                                            <Label text="ðŸ’°" styleClass="stat-icon" />
                                        </VBox>
                                        <VBox>
                                            <Label fx:id="totalRevenueLabel" text="0" styleClass="stat-value-large" />
                                            <Label text="Gross Revenue" styleClass="stat-label-muted" />
                                        </VBox>
                                    </HBox>
                                </VBox>
                                
                                <VBox styleClass="admin-stat-card" HBox.hgrow="ALWAYS">
                                    <HBox spacing="15" alignment="CENTER_LEFT">
                                        <VBox styleClass="admin-stat-icon-box, icon-box-warning">
                                            <Label text="ðŸ“…" styleClass="stat-icon" />
                                        </VBox>
                                        <VBox>
                                            <Label fx:id="activeBookingsLabel" text="0" styleClass="stat-value-large" />
                                            <Label text="Confirmed Bookings" styleClass="stat-label-muted" />
                                        </VBox>
                                    </HBox>
                                </VBox>
                                
                                <VBox styleClass="admin-stat-card" HBox.hgrow="ALWAYS">
                                    <HBox spacing="15" alignment="CENTER_LEFT">
                                        <VBox styleClass="admin-stat-icon-box, icon-box-info">
                                            <Label text="ðŸš—" styleClass="stat-icon" />
                                        </VBox>
                                        <VBox>
                                            <Label fx:id="totalVehiclesLabel" text="0" styleClass="stat-value-large" />
                                            <Label text="Vehicles in Fleet" styleClass="stat-label-muted" />
                                        </VBox>
                                    </HBox>
                                </VBox>
                            </HBox>
                            
                            <VBox styleClass="chart-container" VBox.vgrow="ALWAYS">
                                <Label text="Monthly Revenue Stream" styleClass="chart-title" />
                                <BarChart fx:id="earningsChart" legendVisible="false" animated="true">
                                    <xAxis><CategoryAxis side="BOTTOM" /></xAxis>
                                    <yAxis><NumberAxis side="LEFT" /></yAxis>
                                </BarChart>
                            </VBox>
                        </VBox>
                    </Tab>
                    
                    <!-- Users Tab -->
                    <Tab text="Users">
                        <VBox styleClass="admin-content">
                            <Label text="User Records" styleClass="page-header" />
                            <TableView fx:id="userTable" styleClass="admin-table" VBox.vgrow="ALWAYS">
                                <columns>
                                    <TableColumn fx:id="userIdColumn" text="UID" prefWidth="80" />
                                    <TableColumn fx:id="usernameColumn" text="Name" prefWidth="200" />
                                    <TableColumn fx:id="emailColumn" text="Email Address" prefWidth="300" />
                                    <TableColumn fx:id="userTypeColumn" text="Account Type" prefWidth="150" />
                                    <TableColumn fx:id="userActionsColumn" text="Actions" prefWidth="150" />
                                </columns>
                                <columnResizePolicy>
                                    <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                                </columnResizePolicy>
                            </TableView>
                        </VBox>
                    </Tab>
                    
                    <!-- Bookings Tab -->
                    <Tab text="Bookings">
                        <VBox styleClass="admin-content">
                            <Label text="Rental History" styleClass="page-header" />
                            <TableView fx:id="bookingTable" styleClass="admin-table" VBox.vgrow="ALWAYS">
                                <columns>
                                    <TableColumn fx:id="bookingIdColumn" text="ID" prefWidth="80" />
                                    <TableColumn fx:id="customerNameColumn" text="Customer" prefWidth="200" />
                                    <TableColumn fx:id="vehicleInfoColumn" text="Vehicle Details" prefWidth="250" />
                                    <TableColumn fx:id="bookingDatesColumn" text="Duration" prefWidth="250" />
                                    <TableColumn fx:id="bookingCostColumn" text="Total Cost" prefWidth="120" />
                                    <TableColumn fx:id="bookingStatusColumn" text="Booking Status" prefWidth="120" />
                                </columns>
                                <columnResizePolicy>
                                    <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                                </columnResizePolicy>
                            </TableView>
                        </VBox>
                    </Tab>
                    
                    <!-- Vehicles Tab -->
                    <Tab text="Vehicles">
                        <VBox styleClass="admin-content">
                            <Label text="Fleet Management" styleClass="page-header" />
                            <TableView fx:id="vehicleTable" styleClass="admin-table" VBox.vgrow="ALWAYS">
                                <columns>
                                    <TableColumn fx:id="vehicleIdColumn" text="ID" prefWidth="80" />
                                    <TableColumn fx:id="vehicleMakeColumn" text="Manufacturer" prefWidth="150" />
                                    <TableColumn fx:id="vehicleModelColumn" text="Model" prefWidth="150" />
                                    <TableColumn fx:id="vehicleTypeColumn" text="Category" prefWidth="120" />
                                    <TableColumn fx:id="vehiclePriceColumn" text="Rate/Day" prefWidth="120" />
                                    <TableColumn fx:id="vehicleStatusColumn" text="Availability" prefWidth="120" />
                                    <TableColumn fx:id="vehicleActionsColumn" text="Modification" prefWidth="150" />
                                </columns>
                                <columnResizePolicy>
                                    <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                                </columnResizePolicy>
                            </TableView>
                        </VBox>
                    </Tab>
                </tabs>
            </TabPane>
        </VBox>
    </center>
</BorderPane>